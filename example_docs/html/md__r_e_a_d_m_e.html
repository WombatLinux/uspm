<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>uspm: Ultra Simple Package Manager</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bitmap.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">uspm
   &#160;<span id="projectnumber">1.3.0</span>
   </div>
   <div id="projectbrief">Package Processing Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Ultra Simple Package Manager </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/afroraydude/uspm/releases/latest"><img src="https://img.shields.io/github/v/release/afroraydude/uspm?style=flat-square" alt="GitHub release (latest by date)" class="inline"/></a> <a href="https://travis-ci.com/afroraydude/uspm"><img src="https://img.shields.io/travis/com/afroraydude/uspm?logo=travis&amp;style=flat-square" alt="Travis (.com)" class="inline"/></a> <a href="https://github.com/afroraydude/uspm/blob/master/LICENSE"><img src="https://img.shields.io/github/license/afroraydude/uspm?style=flat-square" alt="GitHub" class="inline"/></a> <img src="https://img.shields.io/github/repo-size/afroraydude/uspm?style=flat-square" alt="GitHub repo size" class="inline"/> [<img src="https://img.shields.io/website?down_color=red&amp;down_message=offline&amp;label=package%20site&amp;style=flat-square&amp;up_color=green&amp;up_message=online&amp;url=https%3A%2F%2Fpackages.afroraydude.com%2Fwombatlinux%2Fpackages.json" alt="Website" class="inline"/>]</p>
<p>Ultra Simple Package Manager (USPM) is a suite of executables that overall allow for the management of packages.</p>
<p><em><b>PLEASE NOTE</b></em>: Releases on this GitHub <em><b>WILL NOT</b></em> work on Wombat Linux or other Musl-based systems, please use the provided uspm package for that specific operating system.</p>
<p>Here is a list of the current tools:</p><ul>
<li>uspm: The main application that allows for the installation and uninstallation of software packages and their dependencies.</li>
<li>uspm-mkpkg: This optional application is useful for those who want to design USPM packages</li>
<li>uspm-extended: This optional application adds more commands and functions to <code>uspm</code> and is only there for those who want it.</li>
</ul>
<p>The project also contains <code>libuspp</code>, or Ultra Simple Package Processor, which contains the functions necessary to enable all the functionality of <code>uspm</code></p>
<h1><a class="anchor" id="autotoc_md39"></a>
How it works</h1>
<p>All packages come in <code>.uspm</code> files, which are just tarballs. Within the tarball there must be two included files.</p>
<p><code>PACKAGECODE</code> is the install/uninstall script, it contains all the code necessary to install that package</p>
<p><code>PACKAGEDATA</code> is the JSON data that will get added by the package manager to the master list.</p>
<p>The tarballs usually will contain the files necessary to install already compiled code.</p>
<h1><a class="anchor" id="autotoc_md40"></a>
Building and Installing</h1>
<p>This package requires <b>at least</b> <code>cJSON</code> (<a href="https://github.com/DaveGamble/cJSON">found here</a>) and libcurl</p>
<p>There are 2 ways to install:</p>
<p>1) Through Make (this requires GCC) [<em><b>not recommended</b></em>] </p><div class="fragment"><div class="line">git clone https://github.com/afroraydude/uspm.git</div>
<div class="line">cd uspm</div>
<div class="line">make uspm</div>
<div class="line">make install</div>
</div><!-- fragment --><p>2) Through CMake (clang or gcc) </p><div class="fragment"><div class="line">git clone https://github.com/afroraydude/uspm.git</div>
<div class="line">cd uspm</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
<div class="line">make install</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md41"></a>
How to create a package for USPM</h1>
<h2><a class="anchor" id="autotoc_md42"></a>
The easy way</h2>
<p>1) Compile the package from source</p>
<p>2) Place all compiled files in a folder</p>
<p>3) Make a folder with the name of the package and place the previous folder in that</p>
<p>4) Enter the directory</p>
<p>5) Run <code>uspm-mkpkg</code> and follow instructions</p>
<p>6) Exit the directory, you should now have a <code>.uspm</code> package file. ex: </p><div class="fragment"><div class="line">mkdir -p /tmp/package/files </div>
<div class="line"> </div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line"> </div>
<div class="line">../configure --prefix=/tmp/package/files/</div>
<div class="line">make </div>
<div class="line">make install</div>
<div class="line"> </div>
<div class="line">cd /tmp/package</div>
<div class="line">uspm-mkpkg</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md43"></a>
The hard way</h2>
<p>1) Compile the package from source</p>
<p>2) Place all compiled files in a folder</p>
<p>3) Make a folder with the name of the package and place the previous folder in that</p>
<p>4) Inside the package folder, create two files: <code>PACKAGECODE</code> and <code>PACAKGEDATA</code></p>
<p>5) In PACKAGECODE, include all the code necessary to migrate the compiled files into the system so that they are usable, put it in a function that can be called by <code>PACKAGECODE install</code> (<b>NOTE: This must be a shell script</b>)</p>
<p>6) In PACKAGECODE, include all the code necessary to allow for an uninstallation of all files, in a function that can be called by <code>PACKAGECODE uninstall</code></p>
<p>7) In PACKAGEDATA, include the version and dependencies (ex: <code>{"version":"1.0.0", "dependencies":{"test":"1.0.0","test2":"1.0.0"}}</code>)</p>
<p>8) Archive the whole directory into a tarball and make sure the extension is <code>.uspm</code></p>
<p>9) Done!</p>
<p>Example <code>PACKAGEDATA</code> file </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</div>
<div class="line">  &quot;dependencies&quot;: {&quot;uspm&quot;: &quot;1.0.0&quot;}</div>
<div class="line">}</div>
</div><!-- fragment --><p>Example <code>PACKAGECODE</code> file </p><div class="fragment"><div class="line">cd package</div>
<div class="line"> </div>
<div class="line"># Install </div>
<div class="line">if [ $1 == &#39;install&#39; ]</div>
<div class="line">then</div>
<div class="line">  cp -R files/* /usr/</div>
<div class="line"> </div>
<div class="line"># Uninstall</div>
<div class="line">elif [ $1 == &#39;uninstall&#39; ]</div>
<div class="line">then</div>
<div class="line">  rm /usr/local/bin/example</div>
<div class="line">f</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
